<template>
  <view>
    <comheader>
      <view slot="comHeader">{{title}}</view>
    </comheader>
    <view class="details">
      <view class="details-box">
        <repeat for="{{detailsData}}" key="item" index="index" item="item">
          <view class="details-item">
            <label class="details-name">公司名称</label>
            <label class="details-txt">{{item.company}}</label>
          </view>
          <view wx:if="{{vcAcceptTel}}" class="details-item">
            <label class="details-name">产品名称</label>
            <label class="details-txt">{{item.projectName}}</label>
          </view>
          <view class="details-item">
            <label class="details-name">姓名</label>
            <label class="details-txt">{{item.name}}</label>
          </view>
          <view class="details-item">
            <label class="details-name">电话</label>
            <label class="details-txt">{{vcAcceptTel ? item.tel : '***********'}}</label>
            <image wx:if="{{!vcAcceptTel}}" src="../images/lock.jpg" class="lock-img" />
          </view>
          <view class="details-item">
            <label class="details-name">邮箱</label>
            <label class="details-txt">{{vcAcceptEmail ? item.email : '***********'}}</label>
            <image wx:if="{{!vcAcceptEmail}}" src="../images/lock.jpg" class="lock-img" />
          </view>
          <view class="details-item">
            <label class="details-name">职位</label>
            <label class="details-txt">{{item.job}}</label>
          </view>
          <view class="details-item">
            <label class="details-name">关注领域</label>
            <label class="details-txt">{{item.focusArea}}</label>
          </view>
          <view class="details-item">
            <label class="details-name">所处轮次</label>
            <label class="details-txt">{{item.rounds}}</label>
          </view>
          <view wx:if="{{vcAcceptTel}}" class="details-item">
            <label class="details-name">产品介绍</label>
            <!-- <label class="details-txt">{{item.introduce}}</label> -->
            <view class="details-txt introduce">{{item.introduce}}</view>
          </view>
        </repeat>
      </view>
    </view>
    <view wx:if="{{isShowBtn}}" class="confirm-attention">确认关注对方</view>
  </view>
</template>
<script>
  import wepy from 'wepy'
  import comHeader from '../components/common/header'
  import { connect } from 'wepy-redux'
  // import Request from '../api/user'
  @connect({
    role(state) {
      return state.userInfo.role
    },
    myAttentionData(state) {
      return state.myAttentionPage.comData
    },
    attentionToMyData(state) {
      return state.attentionToMyPage.comData
    }
  })
  export default class extends wepy.page {
    config = {}
    data = {
      detailsData: {},
      title: '',
      vcAcceptTel: false,
      vcAcceptEmail: false,
      attention: true,
      isShowBtn: true
    }
    components = {
      comheader: comHeader
    }
    onLoad(option) {
      if (this.role === 1) {
        wepy.setNavigationBarTitle({
          title: '项目详情'
        })
        this.title = '项目详情'
        this.vcAcceptTel = true
        this.vcAcceptEmail = true
      }
      if (this.role === 2) {
        wepy.setNavigationBarTitle({
          title: '机构详情'
        })
        this.title = '机构详情'
      }
      // rid：记录id，aid：0：我的关注 1:关注我的
      if (+option.aid === 0) {
        this.detailsData = this.myAttentionData.filter(({ id }) => id === +option.rid)
      } else {
        this.detailsData = this.attentionToMyData.filter(({ id }) => id === +option.rid)
      }
<<<<<<< HEAD
      // option.scene !== undefined ? this.isShowBtn = true : this.isShowBtn = false
=======
      option.sccene !== undefined ? this.isShowBtn = true : this.isShowBtn = false
>>>>>>> 1c2152cbfceb098e09148b1d12cd9850e5e6708a
    }
  }
</script>
<style lang="less">
  .details{
    box-sizing: border-box;
    width: 100vw;
    padding: 40rpx;
    .details-box{
      width: 100%;
      margin: 0 auto;
    }
    .details-item{
      margin-top: 20rpx;
      position: relative;
    }
    .details-name{
      display:inline-block;
      width: 30%;
      position: relative;
      float: left;
    }
    .details-name:after{
      display: inline-block;
      content: ":";
      position: absolute;
      right: 10rpx;
    }
    .details-txt{
      position: relative;
      left: 10rpx;
      display: inline-block;
      width: 60%;
      word-wrap: break-word;
    }
    .lock-img{
      display: inline-block;
      width: 32rpx;
      height: 32rpx;
      position: absolute;
      top: 4rpx;
      right: 0;
    }
    .introduce {
      height: 200rpx;
      overflow: scroll;
    }
  }
  .confirm-attention {
    width: 100vw;
    padding: 30rpx 0;
    text-align: center;
    background: #FF6A3C;
    border-top: 1px solid #f5f5f5;
    color: #ffffff;
    position: fixed;
    bottom: 0;
  }
</style>
